<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <!--
  It is recommended to run your WebDAV Server in Integrated mode (Available for IIS 7.x and later and IIS Express only). It provides
  improved performance comparing to Classic mode. The Visual Studio ASP.NET Development Server can run in Classic mode only.  
  
  In case of IIS 6 and IIS 5.1, to allow folders with 'bin', 'App_code', 'App_Data', etc names and files with 'web.config' name 
  to be created in your storage, the aspnet_filter.dll mapping must be deleted at server level.
  -->
  <system.web>
    <httpHandlers>
      <!-- 
      As soon as entire website is dedicated to WebDAV and there are no any ASP.NET web pages, services, etc we can remove 
      all handlers here. If you wish to host your WebDAV server and ASP.NET/MVC website on the same virtual host use "Add WebDAV 
      Server Implementation" wizard in your ASP.NET/MVC project or web site context menu.
      -->
      <clear />
    </httpHandlers>
    <httpModules>
      <!-- As all files are stored in a storage there is no need to verify permissions against Windows ACL using FileAuthorization module. -->
      <remove name="FileAuthorization" />
    </httpModules>
    <!-- 
    Maximum upload file segment size in Kb, max 2097151 (2Gb) for asp.net.
    To allow '&' and '%' in ASP.NET 4.x set the httpRuntime@requestPathInvalidCharacters="". Note that 
    Microsoft Windows Shell (Miniredirector/Web Folders) does not support '%' in WebDAV item names.
    To allow trailing dots ('.') in ASP.NET 4.x set httpRuntime@relaxedUrlToFileSystemMapping="true".
    -->
    <httpRuntime executionTimeout="2400" maxRequestLength="2097151" requestPathInvalidCharacters="" relaxedUrlToFileSystemMapping="true" targetFramework="4.5" />
    <customErrors mode="Off" />
    <authorization>
      <allow users="*" />
    </authorization>
    <globalization requestEncoding="utf-8" responseEncoding="utf-8" />
    <compilation targetFramework="4.5" debug="true" />
  </system.web>
  <system.webServer>
    <handlers>
      <!-- 
        As soon as this folder is dedicated to WebDAV and there are no any ASP.NET web pages, services, etc we can remove 
        all handlers here.
        -->
      <clear />
      <!-- Used only in IIS 7.x and later in Integrated mode. In Classic mode system.web\httpHandlers section is used. -->
      <!-- !!! Cleared for testing -->
      <!-- <add name="My WebDAV Handler" path="*" verb="*" type="DAV.DavHandler" preCondition="integratedMode" /> -->
		</handlers>
    <!-- Used only in Integrated mode. In Classic mode system.web\httpModules section is used. -->
    <modules>
			<!-- Disables Microsoft IIS 7.x and later WebDAV in Integrated mode. It must be disabled for the engine to function properly. -->
			<remove name="WebDAVModule" />
			<remove name="RadUploadModule" />
			<!-- As all files are stored in a storage there is no need to verify permissions against Windows ACL using FileAuthorization module. -->
      <remove name="FileAuthorization" />
      <!--
      This module is required to enable files upload from Ajax File Browser running in Internet Explorer 9 and earlier versions. To display upload progress 
      IUploadProgress interface must be also implemented on file items. This module does not processes POST requests (postbacks) submitted 
      by ASP.NET pages. If you do not use Ajax File Browser or use it only in IE 10, Firefox, Safari and Chrome you can remove this module. 
      This WebDAV config section is used in IIS 7.x and later Integrated mode only, no wildcard map configuration is required.
      -->
      <add name="ITHitPostUploadProgressModule" type="ITHit.WebDAV.Server.PostUploadProgressModule, ITHit.WebDAV.Server" />
    </modules>
    <validation validateIntegratedModeConfiguration="false" />
    <!-- Used in both Integrated and Classic mode -->
    <security>
      <!-- 
      As all files are stored in a storage there is no need in additional protection.
      * To allow '+' in item names the allowDoubleEscaping attribute is set to 'true'.
      * To allow '&' and '%' in ASP.NET 2.0, IIS 7.x and later the "VerificationCompatibility"= dword:00000001 must be set under the 
        key: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\ASP.NET
      * To allow '&' and '%' in ASP.NET 4.x set the configuration\system.web\httpRuntime@requestPathInvalidCharacters="".
      * To allow trailing dots ('.') in ASP.NET 4.x set httpRuntime@relaxedUrlToFileSystemMapping="true".
      Note that Microsoft Windows Shell (Miniredirector/Web Folders) does not support '%' in WebDAV item names.
      -->
      <requestFiltering allowDoubleEscaping="true">

        <!-- Allow all files with 'web.config' name. -->
        <fileExtensions>
          <clear />
        </fileExtensions>

        <!-- Allow all folders with 'bin', 'App_code', 'App_Data', etc names. -->
        <hiddenSegments>
          <clear />
        </hiddenSegments>

        <!-- Maximum upload file segment size in bytes is 2147483648 (2Gb) for IIS 7.x and later / asp.net. -->
        <requestLimits maxAllowedContentLength="2147483648" />
      </requestFiltering>
    </security>
  </system.webServer>
	<appSettings>
		<add key="BypassIGWAS" value="1"/>
		<add key="DAVRoot" value="1"/>
	</appSettings>
</configuration>